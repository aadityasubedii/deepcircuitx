Module name: key_filter.
Module specification: The key_filter module employs a debouncing mechanism to process a noisy key input signal (key_in) into a stable signal (key_flag). Designed to work with a system clock (sys_clk) and an active-low system reset (sys_rst_n), the module counts clock cycles to determine the stability of key_in. If key_in remains unpressed for a span outlined by CNT_max (default 20'd99_9999), the key_flag is asserted to indicate a debounced signal. The input ports include sys_clk for synchronization of the module's operations, sys_rst_n for resetting the module's state, and key_in for receiving the raw, potentially bouncing signal from the key. The singular output port, key_flag, signifies the stable, debounced state of the key. Internally, cnt_20ms (a 20-bit counter) records the time the key_in remains unpressed. The module encompasses two always-blocks: the first block manages the cnt_20ms by resetting it during a low sys_rst_n signal or when key_in is pressed, and maintains its value when the counter reaches CNT_max with key_in unpressed; otherwise, it increments the counter. The second block handles key_flag output by resetting it when sys_rst_n is low, setting it high when cnt_20ms matches CNT_max - 1, indicating a stable input, and resetting otherwise to ensure a clear indication of a debounced signal. This structured approach ensures accurate and reliable key press detection in noisy environments.