{
    "line_num": [
        [
            107,
            227
        ]
    ],
    "blocks": [
        "\talways @(posedge clock or posedge reset) begin\n\t\tif (reset) begin\n\t\t\tstate <= IDLE;\t\t\n\t\t\tbank_to_read <= 0;\n\t\t\tmaster_write <= 0;\n\t\t\tmaster_writedata <= 0;\n\t\t\tmaster_address <= 0;\n\t\t\tdo_control_packet <= 0;\n\t\t\twidth_of_next_vid_packet <=0;\n\t\t\theight_of_next_vid_packet <=0;\n\t\t\tinterlaced_of_next_vid_packet <=0;\n\t\t\trunning<=0;\n\t\t\tframe_complete<=0;\n\t\t\t\n\t\tend\telse begin\n\t\t\tcase (state)\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tIDLE :\tbegin\n\t\t\t\t\t\n\t\t\t\t\tmaster_write<=0;\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tframe_complete<=0;\n\t\t\t\t\tif(go_bit) begin\n\t\t\t\t\t\tstate <= SENDING_ADDRESS;\n\t\t\t\t\t\tbank_to_read <= next_bank;\n\t\t\t\t\t\trunning<=1;\t\t\t\t\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tSENDING_ADDRESS :\tbegin \n\t\t\t\t\tstate <= SENDING_SAMPLES;\n\t\t\t\t\tmaster_address <= PACKET_READER_PACKET_ADDRESS_ADDRESS;\n\t\t\t\t\tmaster_write <= 1;\n\t\t\t\t\tdo_control_packet <= 1;\n\t\t\t\t\tif(bank_to_read==0) begin\t\t\t\t\t\n\t\t\t\t\t\tmaster_writedata <= vid_packet_base_address_bank0;\n\t\t\t\t\t\twidth_of_next_vid_packet <= ctrl_packet_width_bank0;\n\t\t\t\t\t\theight_of_next_vid_packet <= ctrl_packet_height_bank0;\n\t\t\t\t\t\tinterlaced_of_next_vid_packet <= ctrl_packet_interlaced_bank0;\n\t\t\t\t\tend else begin\n\t\t\t\t\t\tmaster_writedata <= vid_packet_base_address_bank1;\n\t\t\t\t\t\twidth_of_next_vid_packet <= ctrl_packet_width_bank1;\n\t\t\t\t\t\theight_of_next_vid_packet <= ctrl_packet_height_bank1;\n\t\t\t\t\t\tinterlaced_of_next_vid_packet <= ctrl_packet_interlaced_bank1;\n\t\t\t\t\tend\t\t\t\t\n\t\t\t\tend\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tSENDING_SAMPLES :\tbegin \n\t\t\t\t\tstate <= SENDING_WORDS;\n\t\t\t\t\t\n\t\t\t\t\tdo_control_packet <= 0;\n\t\t\t\t\tmaster_address <= PACKET_READER_PACKET_SAMPLES_ADDRESS;\n\t\t\t\t\tmaster_write <= 1; \n\t\t\t\t\tif(bank_to_read==0) begin\t\t\t\t\t\n\t\t\t\t\t\tmaster_writedata <= vid_packet_samples_bank0;\n\t\t\t\t\tend else begin\n\t\t\t\t\t\tmaster_writedata <= vid_packet_samples_bank1;\n\t\t\t\t\tend\t\t\t\t\n\t\t\t\tend\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tSENDING_WORDS :\tbegin \n\t\t\t\t\tstate <= SENDING_TYPE;\n\t\t\t\t\tmaster_address <= PACKET_READER_PACKET_WORDS_ADDRESS;\n\t\t\t\t\tmaster_write <= 1; \n\t\t\t\t\tif(bank_to_read==0) begin\t\t\t\t\t\n\t\t\t\t\t\tmaster_writedata <= vid_packet_words_bank0;\n\t\t\t\t\tend else begin\n\t\t\t\t\t\tmaster_writedata <= vid_packet_words_bank1;\n\t\t\t\t\tend\t\t\t\t\n\t\t\t\tend\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tSENDING_TYPE :\tbegin \n\t\t\t\t\tstate <= SENDING_GO_AND_ENABLE_INTERRUPT;\n\t\t\t\t\tmaster_address <= PACKET_READER_PACKET_TYPE_ADDRESS;\n\t\t\t\t\tmaster_write <= 1; \n\t\t\t\t\tmaster_writedata <= 0; \n\t\t\t\tend\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tSENDING_GO_AND_ENABLE_INTERRUPT :\tbegin \n\t\t\t\t\tstate <= WAITING_END_FRAME;\n\t\t\t\t\tmaster_address <= PACKET_READER_GO_ADDRESS;\n\t\t\t\t\tmaster_write <= 1; \n\t\t\t\t\tmaster_writedata <= 3; \n\t\t\t\tend\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tWAITING_END_FRAME\t: begin\n\t\t\t\t\tmaster_address <= PACKET_READER_INTERRUPT_ADDRESS;\n\t\t\t\t\tmaster_writedata <= 2;\n\t\t\t\t\tmaster_write <= 0; \n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif(master_interrupt_recieve) begin\n\t\t\t\t\t\tstate <= IDLE;\n\t\t\t\t\t\trunning <= 0;\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tframe_complete <=1;\n\t\t\t\t\t\t\n\t\t\t\t\t\tmaster_write <= 1;\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tendcase\n\t\tend\n\tend\t"
    ]
}