{
    "line_num": [
        [
            216,
            238
        ],
        [
            214,
            214
        ],
        [
            213,
            213
        ],
        [
            211,
            211
        ],
        [
            210,
            210
        ],
        [
            209,
            209
        ],
        [
            208,
            208
        ],
        [
            96,
            206
        ],
        [
            62,
            62
        ],
        [
            61,
            61
        ],
        [
            60,
            60
        ],
        [
            59,
            59
        ],
        [
            52,
            52
        ],
        [
            51,
            51
        ],
        [
            41,
            49
        ]
    ],
    "blocks": [
        "always @ (state or sof_cvi_int or sof_cvo_int) begin\n    next_state = state;\n    case(state)\n        `SC_CVI: begin\n            if(sof_cvo_int & sof_cvi_int)\n                next_state = `SC_IDLE;\n            else if(sof_cvo_int)\n                next_state = `SC_CVO;\n        end\n        `SC_CVO: begin\n             if(sof_cvi_int & sof_cvo_int)\n                 next_state = `SC_IDLE;\n             else if(sof_cvi_int)\n                 next_state = `SC_CVI;\n        end\n        default: begin\n            if(sof_cvi_int & ~sof_cvo_int)\n                next_state = `SC_CVI;\n            else if(~sof_cvi_int & sof_cvo_int)\n                next_state = `SC_CVO;\n        end\n    endcase\nend",
        "assign sync_compare_h_reset_next = (remove_lines_next) ? h_count_remove : h_count_repeat;",
        "assign remove_samples_next = (syncing_lines) ? remove_lines_next : h_count_remove < h_count_repeat;",
        "assign syncing_lines = sync_compare_v_reset_next > 13'd0;",
        "assign sync_compare_v_reset_next = (remove_lines_next) ? v_count_remove : v_count_repeat;",
        "assign remove_lines_next = v_count_remove < v_count_repeat;",
        "assign valid = v_count_remove_valid & v_count_repeat_valid;",
        "always @ (posedge rst or posedge clk) begin\n    if(rst) begin\n        h_count_repeat <= 14'd0;\n        h_count_remove <= 14'd0;\n        v_count_repeat <= 13'd0;\n        v_count_repeat_valid <= 1'b0;\n        v_count_remove <= 13'd0;\n        v_count_remove_valid <= 1'b0;\n        state <= `SC_IDLE;\n        sync_lines0 <= 1'b0;\n        sync_samples0 <= 1'b0;\n        sync_compare_v_reset0 <= 13'd0;\n        sync_compare_h_reset0 <= 14'd0;\n        remove_repeatn0 <= 1'b0;\n        genlocked0 <= 1'b0;\n\t\t  sync_lines1 <= 1'b0;\n        sync_samples1 <= 1'b0;\n        sync_compare_v_reset1 <= 13'd0;\n        sync_compare_h_reset1 <= 14'd0;\n        remove_repeatn1 <= 1'b0;\n        genlocked1 <= 1'b0;\n\t\t  sync_lines <= 1'b0;\n        sync_samples <= 1'b0;\n        sync_compare_v_reset <= 13'd0;\n        sync_compare_h_reset <= 14'd0;\n        remove_repeatn <= 1'b0;\n        genlocked <= 1'b0;\n    end else begin\n        if(sclr) begin\n            h_count_repeat <= 14'd0;\n            h_count_remove <= 14'd0;\n            v_count_repeat <= 13'd0;\n            v_count_repeat_valid <= 1'b0;\n            v_count_remove <= 13'd0;\n            v_count_remove_valid <= 1'b0;\n            state <= `SC_IDLE;\n        end else begin\n            if(sclr_state) begin\n                h_count_repeat <= 14'd0;\n                h_count_remove <= 14'd0;\n                v_count_repeat <= 13'd0;\n                v_count_repeat_valid <= (14'd0 == h_count_repeat) && (13'd0 == v_count_repeat);\n                v_count_remove <= 13'd0;\n                v_count_remove_valid <= (14'd0 == h_count_remove) && (13'd0 == v_count_remove);\n            end else begin\n                if(state == `SC_CVI && next_state == `SC_CVO) begin\n                    h_count_remove <= h_count;\n                    v_count_remove <= v_count;\n                    v_count_remove_valid <= (h_count == h_count_remove) && (v_count == v_count_remove);\n                end\n                if(state == `SC_CVO && next_state == `SC_CVI) begin\n                    h_count_repeat <= h_count;\n                    v_count_repeat <= v_count;\n                    v_count_repeat_valid <= (h_count == h_count_repeat) && (v_count == v_count_repeat);\n                end\n            end\n        \n            state <= next_state;\n        end\n        \n        if(sclr | ~valid) begin\n            sync_lines0 <= 1'b0;\n            sync_samples0 <= 1'b0;\n            sync_compare_v_reset0 <= 13'd0;\n            sync_compare_h_reset0 <= 14'd0;\n            genlocked0 <= 1'b0;\n        end else begin\n            if(syncing_lines) begin\n                sync_compare_v_reset0 <= sync_compare_v_reset_next;\n                sync_lines0 <= 1'b1;\n                \n                sync_compare_h_reset0 <= sync_compare_h_reset_next;\n                sync_samples0 <= 1'b1;\n                \n                genlocked0 <= 1'b0;\n            end else begin\n                sync_compare_v_reset0 <= 13'd0;\n                sync_lines0 <= 1'b0;\n                \n                if(sync_compare_h_reset_next > divider_value) begin\n                    sync_compare_h_reset0 <= sync_compare_h_reset_next;\n                    sync_samples0 <= 1'b1;\n                    \n                    genlocked0 <= 1'b0;\n                end else begin\n                    sync_compare_h_reset0 <= 14'd0;\n                    sync_samples0 <= 1'b0;\n                    \n                    genlocked0 <= 1'b1;\n                end\n            end\n            \n        end\n        \n        remove_repeatn0 <= remove_samples_next;\n\t\t  \n\t\t  sync_lines1 <= sync_lines0;\n\t\t  sync_samples1 <= sync_samples0;\n        remove_repeatn1 <= remove_repeatn0;\n        sync_compare_h_reset1 <= sync_compare_h_reset0;\n        sync_compare_v_reset1 <= sync_compare_v_reset0;\n        genlocked1 <= genlocked0;\n\t\t  \n\t\t  sync_lines <= sync_lines1;\n\t\t  sync_samples <= sync_samples1;\n        remove_repeatn <= remove_repeatn1;\n        sync_compare_h_reset <= sync_compare_h_reset1;\n        sync_compare_v_reset <= sync_compare_v_reset1;\n        genlocked <= genlocked1;\n    end\nend",
        "assign sclr_state = (sof_cvi_int & sof_cvo_int);",
        "assign sclr_frame_counter = sclr | sof_cvi_int | sof_cvo_int;",
        "assign sclr = ~enable | restart_count;",
        "assign enable = sof_cvi_locked & sof_cvo_locked & genlock_enable[1] & genlock_enable[0];",
        "assign sof_cvo_int = sof_cvo & ~sof_cvo_reg;",
        "assign sof_cvi_int = sof_cvi & ~sof_cvi_reg;",
        "always @ (posedge rst or posedge clk) begin\n    if(rst) begin\n        sof_cvi_reg <= 1'b0;\n        sof_cvo_reg <= 1'b0;\n    end else begin\n        sof_cvi_reg <= sof_cvi;\n        sof_cvo_reg <= sof_cvo;\n    end\nend"
    ]
}