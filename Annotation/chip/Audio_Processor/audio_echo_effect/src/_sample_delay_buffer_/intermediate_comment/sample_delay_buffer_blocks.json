{
    "line_num": [
        [
            40,
            122
        ]
    ],
    "blocks": [
        "    always @(posedge clk or posedge reset) begin\n        if (reset) begin\n            buffer_ad <= 0;\n            buffer_wd <= 0;\n            buffer_we <= 1'b0;\n            state <= 3'd0;\n            i_ready <= 1'b1;\n            o_audio <= 0;\n            o_current <= 0;\n            o_valid <= 1'b0;\n            o_valid_processor <= 1'b0;\n            i_ready_processor <= 1'b0;\n        end else\n            case (state)\n            3'd0:\n                begin\n                    buffer_wd <= i_audio;\n                    buffer_we <= 1'b1;\n                    if (i_valid) begin\n                        i_ready <= 1'b0;\n                        state <= 3'd1;\n                    end\n                end\n            3'd1:\n                begin\n                    buffer_we <= 1'b0;\n                    buffer_ad <= next_buffer_ad;\n                    if (buffer_ad == buffer_depth_last) begin\n                        state <= 3'd2;\n                    end else begin\n                        o_audio <= buffer_wd;\n                        o_valid <= 1'b1;\n                        state <= 3'd7;\n                    end\n                end\n            3'd7:\n                if (o_ready) begin\n                    o_valid <= 1'b0;\n                    i_ready <= 1'b1;\n                    state <= 3'd0;\n                end\n            3'd2:\n                begin\n                    i_ready <= 1'b1;\n                    state <= 3'd3;\n                end\n            3'd3:\n                begin\n                    o_current <= i_audio;\n                    if (i_valid) begin\n                        i_ready <= 1'b0;\n                        o_valid_processor <= 1'b1;\n                        state <= 3'd4;\n                    end\n                end\n            3'd4:\n                if (o_ready_processor) begin\n                    o_valid_processor <= 1'b0;\n                    i_ready_processor <= 1'b1;\n                    state <= 3'd5;\n                end\n            3'd5:\n                begin\n                    buffer_we <= 1'b1;\n                    buffer_wd <= i_feedback;\n                    o_audio <= i_current;\n                    if (i_valid_processor) begin\n                        i_ready_processor <= 1'b0;\n                        o_valid_processor <= 1'b0;\n                        o_valid <= 1'b1;\n                        state <= 3'd6;\n                    end\n                end\n            3'd6:\n                begin\n                    buffer_we <= 1'b0;\n                    if (o_ready) begin\n                        o_valid <= 1'b0;\n                        buffer_ad <= next_buffer_ad;\n                        state <= 3'd2;\n                    end\n                end\n            endcase"
    ]
}