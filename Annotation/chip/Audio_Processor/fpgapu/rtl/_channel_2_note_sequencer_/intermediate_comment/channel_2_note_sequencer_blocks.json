{
    "line_num": [
        [
            102,
            106
        ],
        [
            86,
            100
        ],
        [
            71,
            83
        ],
        [
            47,
            68
        ],
        [
            45,
            45
        ],
        [
            27,
            44
        ]
    ],
    "blocks": [
        "  assign o_top = 8'hff;\n  assign o_top_valid = 1;\n  note_table #(.FILE(NOTE_TABLE_FILE)) note_table\n    (.i_note(r_note), .o_compare(o_phase_delta));\n  assign o_envelope = r_envelope;",
        "  always @(*) begin\n    case (r_envelope_index)\n      4'd00: r_envelope = 7*2;\n      4'd01: r_envelope = 7*2;\n      4'd02: r_envelope = 7*2;\n      4'd03: r_envelope = 7*2;\n      4'd04: r_envelope = 7*2;\n      4'd05: r_envelope = 7*2;\n      4'd06: r_envelope = 7*2;\n      4'd07: r_envelope = 1*2;\n      4'd08: r_envelope = 0;\n\n      default: r_envelope = 0;\n    endcase\n  end",
        "  always @(posedge i_clk) begin\n    if (i_rst) begin\n      r_envelope_index <= 0;\n    end else if (r_new_note) begin\n      r_envelope_index <= 0;\n    end else if (i_tick_stb) begin\n      if (r_envelope_index == 4'd8) begin\n        r_envelope_index <= 4'd8;\n      end else begin\n        r_envelope_index <= r_envelope_index + 1;\n      end\n    end\n  end",
        "  always @(*) begin\n    case (r_note_index)\n      \n      4'd00: begin r_note = `NOTE_Fs5;  r_note_len = note_len(2); end\n      4'd01: begin r_note = `NOTE_Cs6;  r_note_len = note_len(2); end\n      4'd02: begin r_note = `NOTE_Fs6;  r_note_len = note_len(2); end\n      4'd03: begin r_note = `NOTE_Gs6;  r_note_len = note_len(2); end\n      4'd04: begin r_note = `NOTE_Cs6;  r_note_len = note_len(2); end\n      4'd05: begin r_note = `NOTE_Fs6;  r_note_len = note_len(2); end\n      4'd06: begin r_note = `NOTE_Gs6;  r_note_len = note_len(2); end\n      4'd07: begin r_note = `NOTE_B6;   r_note_len = note_len(2); end\n      4'd08: begin r_note = `NOTE_Cs6;  r_note_len = note_len(2); end\n      4'd09: begin r_note = `NOTE_B6;   r_note_len = note_len(2); end\n      4'd10: begin r_note = `NOTE_As6;  r_note_len = note_len(2); end\n      4'd11: begin r_note = `NOTE_Cs6;  r_note_len = note_len(2); end\n      4'd12: begin r_note = `NOTE_As6;  r_note_len = note_len(2); end\n      4'd13: begin r_note = `NOTE_Gs6;  r_note_len = note_len(2); end\n      4'd14: begin r_note = `NOTE_Fs6;  r_note_len = note_len(2); end\n      \n      default: begin r_note = `NOTE_RST;   r_note_len = note_len(4); end\n    endcase\n  end",
        "  wire r_new_note = i_note_stb & (r_duration_count == r_note_len);",
        "  always @(posedge i_clk) begin\n    if (i_rst) begin\n      r_note_index <= 0;\n      r_duration_count <= 0;\n    end else if (i_note_stb) begin\n      if (r_duration_count == r_note_len) begin\n        r_duration_count <= 0;\n        r_note_index <= r_note_index + 1;\n        if (r_note_index == 4'd14) begin\n          r_note_index <= 0;\n        end\n        \n      end else begin\n        r_duration_count <= r_duration_count + 1;\n        \n      end\n    end\n  end"
    ]
}