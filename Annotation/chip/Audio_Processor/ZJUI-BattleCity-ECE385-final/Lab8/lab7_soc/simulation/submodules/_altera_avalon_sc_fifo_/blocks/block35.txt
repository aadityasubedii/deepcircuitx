Line number: 
[484, 512]
Comment: 
This block of logic is responsible for controlling the status flags and output payload of a memory unit. It uses memory usage flags (`mem_used`) to determine whether the memory is full or empty, and based on the depth of the memory, customizes the fullness flag (`full`). Similarly, it caters to the empty latency by conditionally adjusting the empty flag (`empty`) and the output payload (`internal_out_payload`). If there's no empty latency, and the memory is unused but a valid input is available, it sets the output payload to the new input.