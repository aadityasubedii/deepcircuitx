Line number: 
[302, 312]
Comment: 
This block of code implements a clocked register, controlled by a clock (clk) and a reset signal. It essentially forms the backbone of memory handling unit. During a positive edge of reset, it clears a specified memory location mem[i], setting it to 0. In absence of a reset but at the rising of the clock signal, it either reads or checks the availability of specific memory slot (mem_used[i]). When it finds the location unoccupied (!mem_used[i+1]), it sets the content (mem[i]) to the input payload (in_payload). However, if the checked memory location (mem_used[i+1]) is already filled, the input payload is instead stored at the next memory address (mem[i] <= mem[i+1]).