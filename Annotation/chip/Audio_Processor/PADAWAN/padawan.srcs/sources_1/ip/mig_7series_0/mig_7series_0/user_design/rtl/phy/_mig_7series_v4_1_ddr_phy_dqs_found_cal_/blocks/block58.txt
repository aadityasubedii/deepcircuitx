Line number: 
[267, 297]
Comment: 
This block of code re-assigns the offsets to different sets of data and memory controller ranks based on the range of the highest bank. By means of conditional blocks and looping over available ranks, it uses bit slicing to assign the offsets. If the highest bank is 3, it assigns 6-bit slices from two arrays: `final_data_offset` and `final_data_offset_mc`. If it's 2, the last 6 bits from each array are set to 0. If it doesn't match any conditions, it assigns only the first 6 bits from each array, and the rest as 0.