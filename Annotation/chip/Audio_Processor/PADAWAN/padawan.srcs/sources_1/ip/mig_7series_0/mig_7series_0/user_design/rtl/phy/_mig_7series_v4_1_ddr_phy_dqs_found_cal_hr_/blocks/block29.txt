Line number: 
[844, 857]
Comment: 
This block of code in Verilog is responsible for setting and updating the read byte offset for data received from the memory ranks. At each positive edge of the clock signal the code block checks if a reset signal has been triggered, in which case it resets all the read byte offsets for all ranks to initial values characterized by the sum of number of clock cycles (nCL) and additional latency (nAL) minus two. If no reset signal has been triggered, this offset is updated based on whether certain conditions related to memory rank read completion, DQS signal initialization and latency factor are met. The offset also incrementally increases when the DQS signal has started, a detect PI signal has been found and fine adjustment is not needed. All the changes in the read byte offset incorporate a delay according to the total cycle time (TCQ).