Line number: 
[837, 865]
Comment: 
The block of code functions to detect and manage MPR pattern during calibration in a digital system. It generates a binary (1 or 0) output 'idel_mpr_pat_detect_r' under various conditions registered on either positive edge of the clock or under asynchronous reset. First, when 'rst', 'CAL1_MPR_NEW_DQS_WAIT' state, or 'inhibit_edge_detect_r' are active, 'idel_mpr_pat_detect_r' is set to 0. Second, certain conditions determined by rising and falling edges of the previous MPR read values or stability of 'idel' counter also cause 'idel_mpr_pat_detect_r' to set as 0. Finally, the pattern detected is recognized when all rising edges of 'mpr_rd' are high and the 'stable_idel_cnt' is '3'd2', indicating stable idle states for MPR readings and mismatches are checked between previous 'mpr_rd' and 'mux_rd' values, upon which 'idel_mpr_pat_detect_r' is set to 1.