Line number: 
[339, 346]
Comment: 
This block of code is fundamentally a counter that operates on every positive edge of a clock signal ('clk'). The code resets the counter ('occ_cnt') when a reset signal ('rst') is high. Otherwise, it updates the counter based on the state of two flags: 'wr_data_end' and 'rd_data_upd_indx_r'. When 'wr_data_end' is high and 'rd_data_upd_indx_r' is low, it shifts 'occ_cnt' one bit to the right and pads a 0 at the top. In contrast, when 'rd_data_upd_indx_r' is high and 'wr_data_end' is low, it shifts 'occ_cnt' one bit to the left and pads a 1 at the bottom.