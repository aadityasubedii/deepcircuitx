Line number: 
[139, 152]
Comment: 
This block handles the output data stream of a digital audio system based on the conditions of various control signals. The output, 'data_out_shift_reg', is reset if the 'reset' signal is active, assigned with either left or right audio data (left_channel_from_fifo or right_channel_from_fifo) under control of 'read_left_channel' or 'read_right_channel'. If there's a change in the left-right clock (either on rising edge or falling edge), the register is cleared. Lastly, if the bit clock falls, the output data register is shifted to the right by one bit and a 0 is appended on the left, preparing for the next data transmission.