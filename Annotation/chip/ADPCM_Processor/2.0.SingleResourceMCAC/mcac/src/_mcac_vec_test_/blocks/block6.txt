Line number: 
[650, 717]
Comment: 
The block manages the data capture and test process for a specific hardware design. It is triggered by a positive edge reset and a negative edge clock. When reset or program_start are false the variables are initialized to their default state. The core functionality of the block captures data from dec_s, a serial data signal, into a multi-dimensional array (data_out_d) with control over channel (tdmo_ch_count_d) and bit counts (tdmo_bit_count_d). These counters are incremented for each captured data bit, resetting upon reaching their limits. There are also conditions flagging completed 'tests' or 'loops' wherein upon reaching the maximum channel and bit counts (tdmo_ch_count_d == 5'b11111 and tdmo_bit_count_d == 3'b001), the tdmo_test_count_d is incremented. Additional error checking is done for data consistency between live data capture and a reference dataset. The block completes when the test counter surpasses a predefined loop count, indicated by the TESTBENCHFINISHED message.