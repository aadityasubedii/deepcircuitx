Line number: 
[1628, 1751]
Comment: 
This block controls the processor's operation flow and data processing under different system states. On a system 'reset' or 'clk' rising edge, if 'reset' is high, it initializes all the processor's registers and control signals and sets the initial state to 'RST_WAIT1'. If the system is not reset and 'i_core_stall' is not active, indicating the processor is not held in a suspended state, the values of all the data flow control signals and corresponding registers are updated according to the next state logic or with the new incoming instructions and system signals. This is done under the condition that there's no conflict, i.e., the instruction is valid and there's no interrupt. This block also manages coprocessor operations if the instruction involves coprocessor codes.