Line number: 
[171, 174]
Comment: 
This block performs a conditional bitwise shift operation on the 'in' vector. The direction and shift amount, dictated by the variables 'direction' and 'shift_amount', are applied to each vector element 'j'. The shift is either a logical left or right, depending on the value of 'direction'. A helper function 'wrap' is used to handle the shift overflow, ensuring cyclic shifts. The bitwise logic inside the block dictates the executed shift operation.