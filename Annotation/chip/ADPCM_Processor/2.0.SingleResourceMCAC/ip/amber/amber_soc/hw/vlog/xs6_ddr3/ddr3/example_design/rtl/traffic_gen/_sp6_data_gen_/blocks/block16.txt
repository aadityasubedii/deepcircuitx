Line number: 
[315, 374]
Comment: 
This block is a state machine controlling the data writing process based on the clock signal, reset signal, FIFO readiness, burst counter, the start of a command, and the data mode. On signal reset, the process initializes certain variables. Depending on the number of data-queue pins (NUM_DQ_PINS) and other conditions, it shifts or modifies 'w1data'. For NUM_DQ_PINS equaling 16, the block checks the value of 'addr_i[4:2]' or the data mode, and accordingly sets 'w1data'. For NUM_DQ_PINS equaling 8, it checks 'addr_i[2]' or reorders 'w1data'. With NUM_DQ_PINS equalling 4, 'w1data' is set based upon the data mode.