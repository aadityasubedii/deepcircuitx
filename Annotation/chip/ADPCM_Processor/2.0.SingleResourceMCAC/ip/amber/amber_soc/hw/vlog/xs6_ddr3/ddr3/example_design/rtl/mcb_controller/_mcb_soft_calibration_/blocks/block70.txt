Line number: 
[654, 662]
Comment: 
This block of code manages the control signal (WAIT_SELFREFRESH_EXIT_DQS_CAL) for exiting the Self-refresh mode in a Memory Controller Block (MCB) system. This signal is activated when the system is transitioning from self-refresh mode to normal operation and a dynamic calibration is required after self-refresh. At the rising edge of the UI_CLK, if a reset (RST) is encountered, the WAIT_SELFREFRESH_EXIT_DQS_CAL signal will be cleared. When the MCB system transitions from self-refresh mode (indicated by SELFREFRESH_MCB_MODE_R2) to normal operation (not in self-refresh mode in the next stage, indicated by ~SELFREFRESH_MCB_MODE_R3), the WAIT_SELFREFRESH_EXIT_DQS_CAL signal will be set. Finally, if the signal is high and a self-refresh request is not present (~SELFREFRESH_REQ_R3), along with the condition that a dynamic calibration is appropriate (PERFORM_START_DYN_CAL_AFTER_SELFREFRESH), the signal will be cleared.