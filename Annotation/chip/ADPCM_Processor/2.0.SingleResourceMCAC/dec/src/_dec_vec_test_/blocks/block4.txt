Line number: 
[707, 747]
Comment: 
This block of code is responsible for test status checking in the system. It looks for either the `test_status_set` flag or `testfail` flag to be high. If the `test_status_reg` value equals 17 and there is no `testfail`, it displays the registers, reports a success message on the console and in the log file, and then ends the simulation. If a test failure occurs, it displays the registers and failure message, either due to a general failure, or a specific error code (if `test_status_reg` >= 0x8000) or line error otherwise. This failure message is also written to the log file and the simulation is subsequently ended.